<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
        <link rel="stylesheet" type="text/css" href="sources/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="sources/css/bootstrap-theme.min.css" />
        <link rel="stylesheet" type="text/css" href="sources/mycss/index.css" />
        <link rel="stylesheet" type="text/css" href="sources/jquery/jquery-ui.css"></link>
        <style>
            .floatrite{
                float:right;
            }

            .calImg{
                top: -2px;
                position: relative;
            }
        </style>
    </h:head>
    <h:body>

        <div class="container">
            <div class="masthead">
                <h3 class="text-muted">GTheaters</h3>
                <nav>
                    <ul class="nav nav-justified">
                         <li><a href="index.xhtml">Home</a></li>
                        <li><a href="about.xhtml">About</a></li>
                        <li><a href="contact.xhtml">Contact</a></li>
                    </ul>
                </nav>
            </div>
            <div class="cbody">
                <f:view>
                    <h:form>
                        <h:dataTable styleClass="table table-striped"  value="#{mainPageBean.movieTimesList}" var="times">
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="#{mainPageBean.movieObj.mname}" style="font-weight: bold;"/>
                                </f:facet>
                                <h:commandButton styleClass="trigger btn btn-default" value="#{times.timesPK.ttime}" style="font-weight: bold;" action="#{mainPageBean.GoToOrder(times)}"><f:ajax execute="@form" render="@none" /></h:commandButton><br/>

                            </h:column>
                        </h:dataTable>

                        <h:commandButton value="Go Back To Index" styleClass="btn btn-default floatrite" action="#{mainPageBean.GoToIndex()}" />
                    </h:form>
                </f:view>



                <!-- Modal -->
                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <h:form>
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">Number Of Tickets</h4>
                                </div>
                                <div class="modal-body">

                                    <p>Number of Tickets available: Infinite</p><br/>
                                    <div class="form-group">
                                        <h:outputText value="Select Ticket(s): "/>
                                        <h:selectOneMenu value="#{mainPageBean.numTickets}">
                                            <f:selectItem itemValue="1" itemLabel="1" />
                                            <f:selectItem itemValue="2" itemLabel="2" />	
                                            <f:selectItem itemValue="3" itemLabel="3" />
                                            <f:selectItem itemValue="4" itemLabel="4" />
                                            <f:selectItem itemValue="5" itemLabel="5" />
                                            <f:selectItem itemValue="6" itemLabel="6" />
                                            <f:selectItem itemValue="7" itemLabel="7" />
                                            <f:selectItem itemValue="8" itemLabel="8" />
                                            <f:ajax event="change" render="msgtext"
                                                    listener="#{mainPageBean.handleEvent}" />
                                        </h:selectOneMenu>
                                        <h:outputText id="msgtext" value=" x $10 = $#{mainPageBean.numTotal}.00"/>
                                    </div>

                                </div>

                                <div class="modal-body">
                                    <p>Pick the date for the showing:</p>
                                    <div class="form-group">
                                        <h:graphicImage  styleClass="calImg" height ="25px" width="25px" url="sources/jquery/calendar-128.png" ></h:graphicImage>
                                        <h:inputText styleClass="datepicker" binding="#{input1}">   </h:inputText>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <h:commandButton value="Place Order" styleClass="btn btn-primary" action="#{mainPageBean.GoToOrderButton(input1.value)}" />

                                </div>
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="footerbox">
                    <p>&copy; 2016 GTheaters, Inc.</p>
                </div>
            </footer>
        </div>
        <script src="sources/jquery-3.1.0.min.js" type="text/javascript"></script>

        <script   src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"  type="text/javascript"></script>
        <script src="sources/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="sources/myJquery.js" type="text/javascript"></script>
    </h:body>
</html>

